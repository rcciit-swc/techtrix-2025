!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="398e0cfc-14b9-49a0-9854-28f98b88cda4",e._sentryDebugIdIdentifier="sentry-dbid-398e0cfc-14b9-49a0-9854-28f98b88cda4")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7704],{29787:function(e,t,s){var n=s(41351),r=s(87493),a=s(79312),l=s(55589),o=s(30568),i=s(91052),c=s(32840),d=s(50922),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(l(e)||"string"==typeof e||"function"==typeof e.splice||i(e)||d(e)||a(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var s in e)if(u.call(e,s))return!1;return!0}},50836:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/hooks",function(){return s(21285)}])},29979:function(e,t,s){"use strict";s.d(t,{QI:function(){return l},cK:function(){return a}});var n=s(29787),r=s.n(n);function a(e){let t=null==e?void 0:e.split(",").map(e=>e.trim());return r()(e)||!t||0===t.length?{value:[]}:{value:t.map(e=>{let t=e.match(/(\w+)\s+([\w\[\]]+)(?:\s+DEFAULT\s+(.*))?/i);if(!t)return console.error("Error while trying to parse function arguments",e),null;{let[,e,s,n]=t,r=n?n.trim():void 0;return["timestamp","time","timetz","timestamptz"].includes(s.toLowerCase())&&r&&(r="'".concat(r,"'")),{name:e,type:s,defaultValue:r}}}).filter(Boolean)}}function l(e){let t=[];if(e)for(var s in e)t.push({name:s,value:e[s]});return{value:t}}},67628:function(e,t,s){"use strict";s.d(t,{Q:function(){return o}});var n=s(97458),r=s(94059),a=s(73565),l=s(55228),o=e=>{let{page:t,menu:s}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,n.jsx)(r.ZP,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:s.map((e,o)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(r.ZP.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(a.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,n.jsx)(l.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),o!==s.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},72909:function(e,t,s){"use strict";s.d(t,{$E:function(){return c},h8:function(){return i},kM:function(){return d}});var n=s(28894),r=s(36457),a=s(6464),l=s(52983),o=s(26600);async function i(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/platform/auth/{ref}/config",{params:{path:{ref:s}},signal:t});return r&&(0,a.S3)(r),n}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(o.o.authConfig(t),e=>{let{signal:s}=e;return i({projectRef:t},s)},{enabled:s&&void 0!==t,...r})},d=e=>{let{projectRef:t}=e,s=(0,r.NL)();return(0,l.useCallback)(()=>{t&&s.prefetchQuery(o.o.authConfig(t),e=>{let{signal:s}=e;return i({projectRef:t},s)})},[s,t])}},32875:function(e,t,s){"use strict";s.d(t,{R:function(){return c}});var n=s(49437),r=s(28894),a=s(7324),l=s(25878);let o=n.Z.functions.list();async function i(e,t,s){let{projectRef:n,connectionString:r}=e,a=new Headers(s),{result:i}=await (0,l.R)({projectRef:n,connectionString:r,sql:o.sql,queryKey:["database-functions"]},t,a);return i}let c=function(e){let{projectRef:t,connectionString:s}=e,{enabled:n=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(a.A.databaseFunctions(t),e=>{let{signal:n}=e;return i({projectRef:t,connectionString:s},n)},{enabled:n&&void 0!==t,...l})}},61138:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(98266).Z)("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]])},7539:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var n=s(97458),r=s(12436),a=s(32691),l=s(65921),o=s(67628),i=s(72909),c=s(58326),d=s(83145),u=s.n(d),h=s(10947),m=s(90839),f=s(86976),p=s(37756);let x=e=>[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(e,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(e,"/auth/policies"),items:[]},...p.Qy?[{name:"Sign In / Up",key:"sign-in-up",pages:["providers","third-party"],url:"/project/".concat(e,"/auth/providers"),items:[]},{name:"Sessions",key:"sessions",url:"/project/".concat(e,"/auth/sessions"),items:[]},{name:"Rate Limits",key:"rate-limits",url:"/project/".concat(e,"/auth/rate-limits"),items:[]},{name:"Emails",key:"emails",pages:["templates","smtp"],url:"/project/".concat(e,"/auth/templates"),items:[]},{name:"Multi-Factor",key:"mfa",url:"/project/".concat(e,"/auth/mfa"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(e,"/auth/url-configuration"),items:[]},{name:"Attack Protection",key:"protection",url:"/project/".concat(e,"/auth/protection"),items:[]},{name:"Auth Hooks",key:"hooks",url:"/project/".concat(e,"/auth/hooks"),items:[],label:"BETA"},{name:"Advanced",key:"advanced",url:"/project/".concat(e,"/auth/advanced"),items:[]}]:[]]}],y=()=>{let{ref:e="default"}=(0,r.UO)(),t=(0,l.ar)();(0,i.kM)({projectRef:e});let s=(0,a.useRouter)().pathname.split("/")[4];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Q,{page:s,menu:x(e),"data-sentry-element":"ProductMenu","data-sentry-source-file":"AuthLayout.tsx"}),t&&(0,n.jsx)("div",{className:"px-3",children:(0,n.jsxs)(h.bZ,{children:[(0,n.jsx)(h.Cd,{className:"text-sm",children:"Column Privileges has been shifted"}),(0,n.jsxs)(h.X,{className:"text-xs",children:[(0,n.jsx)("p",{className:"mb-2",children:"It can now be found in the menu under the database section."}),(0,n.jsx)(m.z,{asChild:!0,type:"default",size:"tiny",children:(0,n.jsx)(u(),{href:"/project/".concat(e,"/database/column-privileges"),children:"Head over to Database"})})]})]})})]})};var g=(0,c.Q)(e=>{let{title:t,children:s}=e;return(0,n.jsx)(f.Z,{title:t||"Authentication",product:"Authentication",productMenu:(0,n.jsx)(y,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:s})})},78066:function(e,t,s){"use strict";s.d(t,{CG:function(){return p},FW:function(){return u},I7:function(){return m},Lc:function(){return y},Wv:function(){return j},_S:function(){return h},g$:function(){return x},gW:function(){return v},jX:function(){return f},q7:function(){return d},s_:function(){return i},tM:function(){return g},tU:function(){return c},ur:function(){return b},y:function(){return o}});var n=s(97458),r=s(52983),a=s(86186),l=s(65092);let o="mx-auto w-full max-w-[1200px]",i="px-4 md:px-6 lg:px-14 xl:px-24 2xl:px-28",c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("header",{...r,ref:t,className:(0,l.cn)("w-full","flex-col gap-3 py-6",s)})}),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("h1",{ref:t,...r,className:(0,l.cn)("text-2xl",s)})}),u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("span",{ref:t,...r,className:(0,l.cn)("text-sm text-foreground-light",s)})}),h=r.forwardRef((e,t)=>{let{className:s,bottomPadding:r,...c}=e,{aiAssistantPanel:d}=(0,a.WZ)(),{open:u}=d;return(0,n.jsx)("div",{ref:t,...c,className:(0,l.cn)(o,i,r&&"pb-16",u?"xl:px-6":"",s)})}),m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("w-full h-px bg-border",s)})}),f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("flex flex-col gap-3 py-6","lg:grid md:grid-cols-12 lg:py-12",s)})}),p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("flex flex-col gap-3","min-w-[420px]",s)})}),x=r.forwardRef((e,t)=>{let{className:s,children:r,title:a,...o}=e;return(0,n.jsxs)("div",{ref:t,...o,className:(0,l.cn)("col-span-4 xl:col-span-5 prose text-sm",s),children:[a&&(0,n.jsx)("h2",{children:a}),r]})}),y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",s)})}),g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("flex flex-col gap-3 items-center",s)})}),j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("flex w-full items-center",s)})}),b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)("flex flex-row gap-3",s)})}),v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,...r,className:(0,l.cn)(o,i,"my-8 flex flex-col gap-8",s)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",h.displayName="ScaffoldContainer",m.displayName="ScaffoldDivider",f.displayName="ScaffoldSection",p.displayName="ScaffoldColumn",x.displayName="ScaffoldSectionDetail",y.displayName="ScaffoldSectionContent",g.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",v.displayName="ScaffoldContainerLegacy"},24083:function(e,t,s){"use strict";s.d(t,{p:function(){return l}});var n=s(97458),r=s(65092),a=s(67096);let l=e=>{let{title:t,description:s,docsUrl:l,actions:o,className:i}=e;return(0,n.jsxs)("div",{className:(0,r.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(i)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,n.jsx)("div",{className:"prose text-sm max-w-full",children:s})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,n.jsx)(a.G,{href:l}),o]})]})}},84552:function(e,t,s){"use strict";var n=s(97458),r=s(3010),a=s.n(r),l=s(50416),o=s(62507),i=s(36950),c=s(52983),d=s(88971),u=s(32875),h=s(90839),m=s(10947),f=s(42026),p=s(47482),x=s(64890),y=s(32691),g=s(83145),j=s.n(g),b=s(12436);t.Z=e=>{let{className:t,size:s="tiny",showError:r=!0,disabled:g=!1,schema:v,value:N,onChange:w,filterFunction:k=()=>!0,noResultsLabel:S=(0,n.jsx)("span",{children:"No functions found in this schema."})}=e,C=(0,y.useRouter)(),{ref:_}=(0,b.UO)(),{project:T}=(0,d.d2)(),[E,A]=(0,c.useState)(!1),{data:R,error:O,isLoading:H,isError:M,isSuccess:K,refetch:I}=(0,u.R)({projectRef:null==T?void 0:T.ref,connectionString:null==T?void 0:T.connectionString}),V=(null!=R?R:[]).filter(e=>v&&e.schema===v).filter(k),z=a()(V,e=>e.name);return(0,n.jsxs)("div",{className:t,"data-sentry-component":"FunctionSelector","data-sentry-source-file":"FunctionSelector.tsx",children:[H&&(0,n.jsx)(h.z,{type:"default",className:"justify-start",block:!0,size:s,loading:!0,children:"Loading functions..."}),r&&M&&(0,n.jsxs)(m.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(m.Cd,{className:"text-xs text-amber-900",children:"Failed to load functions"}),(0,n.jsxs)(m.X,{className:"text-xs mb-2",children:["Error: ",O.message]}),(0,n.jsx)(h.z,{type:"default",size:"tiny",onClick:()=>I(),children:"Reload functions"})]}),K&&(0,n.jsxs)(f.J2,{open:E,onOpenChange:A,modal:!1,children:[(0,n.jsx)(f.xo,{asChild:!0,children:(0,n.jsx)(h.z,{size:s,disabled:!!g,type:"default",className:"w-full [&>span]:w-full ".concat("small"===s?"py-1.5":""),iconRight:(0,n.jsx)(l.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:N?(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("p",{className:"text-foreground-lighter",children:"function:"}),(0,n.jsx)("p",{className:"text-foreground",children:N})]}):(0,n.jsx)("div",{className:"w-full flex gap-1",children:(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Select a function"})})})}),(0,n.jsx)(f.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(p.mY,{children:[(0,n.jsx)(p.sZ,{placeholder:"Search functions..."}),(0,n.jsxs)(p.e8,{children:[(0,n.jsx)(p.rb,{children:"No functions found"}),(0,n.jsx)(p.fu,{children:(0,n.jsxs)(x.x,{className:(z||[]).length>7?"h-[210px]":"",children:[!z.length&&(0,n.jsx)(p.di,{disabled:!0,className:"flex items-center justify-between space-x-2 w-full",children:S},"no-function-found"),z.map(e=>(0,n.jsxs)(p.di,{value:e.name.replaceAll('"',""),className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),A(!1)},onClick:()=>{w(e.name),A(!1)},children:[(0,n.jsx)("span",{children:e.name}),N===e.name&&(0,n.jsx)(o.Z,{className:"text-brand",size:14,strokeWidth:2})]},e.id))]})}),(0,n.jsx)(p.zz,{}),(0,n.jsx)(p.fu,{children:(0,n.jsx)(p.di,{className:"cursor-pointer w-full",onSelect:()=>{A(!1),C.push("/project/".concat(_,"/database/functions"))},onClick:()=>A(!1),children:(0,n.jsxs)(j(),{href:"/project/".concat(_,"/database/functions"),onClick:()=>{A(!1)},className:"w-full flex items-center gap-2",children:[(0,n.jsx)(i.Z,{size:14,strokeWidth:1.5}),(0,n.jsx)("p",{children:"New function"})]})})})]})]})})]})]})}},61767:function(e,t,s){"use strict";var n=s(97458),r=s(44735);t.Z=e=>{let{resourceText:t,isFullPage:s=!1}=e,a=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(r.Z,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(a,{})})}):(0,n.jsx)(a,{})}},55228:function(e,t,s){"use strict";var n=s(97458),r=s(83145),a=s.n(r),l=s(94059),o=s(73565),i=s(90839);t.Z=e=>{let{name:t="",isActive:s,isExternal:r,icon:c,rightIcon:d,url:u="",target:h="_self",onClick:m,textClassName:f="",hoverText:p="",label:x}=e,y=(0,n.jsx)(l.ZP.Item,{icon:c,rounded:!0,active:s,onClick:m,children:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,n.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+f,children:[(0,n.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==x&&(0,n.jsx)(o.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:x})]}),d&&(0,n.jsx)("div",{children:d})]})});return u?r?(0,n.jsx)(i.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,n.jsx)(a(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,n.jsx)(a(),{href:u,className:"block",target:h,children:y}):y}},66902:function(e,t,s){"use strict";var n=s(97458),r=s(198),a=s(50416),l=s(62507),o=s(36950),i=s(52983),c=s(88971),d=s(58015),u=s(90817),h=s(90839),m=s(54135),f=s(10947),p=s(42026),x=s(47482),y=s(64890);t.Z=e=>{let{className:t,disabled:s=!1,size:g="tiny",showError:j=!0,selectedSchemaName:b,supportSelectAll:v=!1,excludedSchemas:N=[],onSelectSchema:w,onSelectCreateSchema:k}=e,[S,C]=(0,i.useState)(!1),_=(0,u.Xo)(r.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:T}=(0,c.d2)(),{data:E,isLoading:A,isSuccess:R,isError:O,error:H,refetch:M}=(0,d.Q1)({projectRef:null==T?void 0:T.ref,connectionString:null==T?void 0:T.connectionString}),K=(E||[]).filter(e=>!N.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,n.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[A&&(0,n.jsx)(h.z,{type:"default",className:"w-full [&>span]:w-full",size:g,disabled:!0,children:(0,n.jsx)(m.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&O&&(0,n.jsxs)(f.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(f.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(f.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==H?void 0:H.message]}),(0,n.jsx)(h.z,{type:"default",size:"tiny",onClick:()=>M(),children:"Reload schemas"})]}),R&&(0,n.jsxs)(p.J2,{open:S,onOpenChange:C,modal:!1,children:[(0,n.jsx)(p.xo,{asChild:!0,children:(0,n.jsx)(h.z,{size:g,disabled:s,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,n.jsx)(a.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:b?(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,n.jsx)("p",{className:"text-foreground",children:"*"===b?"All schemas":b})]}):(0,n.jsx)("div",{className:"w-full flex gap-1",children:(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,n.jsx)(p.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(x.mY,{children:[(0,n.jsx)(x.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(x.e8,{children:[(0,n.jsx)(x.rb,{children:"No schemas found"}),(0,n.jsx)(x.fu,{children:(0,n.jsxs)(y.x,{className:(K||[]).length>7?"h-[210px]":"",children:[v&&(0,n.jsxs)(x.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),C(!1)},onClick:()=>{w("*"),C(!1)},children:[(0,n.jsx)("span",{children:"All schemas"}),"*"===b&&(0,n.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==K?void 0:K.map(e=>(0,n.jsxs)(x.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),C(!1)},onClick:()=>{w(e.name),C(!1)},children:[(0,n.jsx)("span",{children:e.name}),b===e.name&&(0,n.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==k&&_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.zz,{}),(0,n.jsx)(x.fu,{children:(0,n.jsxs)(x.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{k(),C(!1)},onClick:()=>{k(),C(!1)},children:[(0,n.jsx)(o.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},21285:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return em}});var n=s(97458),r=s(198),a=s(52983),l=s(34549),o=s(12436),i=s(88971),c=s(5529),d=s(5186),u=s(24083),h=s(72909),m=s(36457),f=s(64618),p=s(6464),x=s(26600);async function y(e){let{projectRef:t,config:s}=e,{data:n,error:r}=await (0,p.r$)("/platform/auth/{ref}/config/hooks",{params:{path:{ref:t}},body:s});return r&&(0,p.S3)(r),n}let g=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,m.NL)();return(0,f.D)(e=>y(e),{async onSuccess(t,s,r){let{projectRef:a}=s;await n.invalidateQueries(x.o.authConfig(a)),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?l.Am.error("Failed to update auth hooks: ".concat(e.message)):t(e,s,n)},...s})};var j=s(25878),b=s(65092),v=s(32002),N=s(98601),w=s(359),k=s(69951),S=s(90817),C=s(75541),_=s(37756),T=s(14500),E=s(90839);let A=[{title:"Send SMS hook",subtitle:"Will be called by Supabase Auth each time an SMS message needs to be sent.",enabledKey:"HOOK_SEND_SMS_ENABLED",uriKey:"HOOK_SEND_SMS_URI",secretsKey:"HOOK_SEND_SMS_SECRETS",enterprise:!1},{title:"Send Email hook",subtitle:"Will be called by Supabase Auth each time an email message needs to be sent.",enabledKey:"HOOK_SEND_EMAIL_ENABLED",uriKey:"HOOK_SEND_EMAIL_URI",secretsKey:"HOOK_SEND_EMAIL_SECRETS",enterprise:!1},{title:"Customize Access Token (JWT) Claims hook",subtitle:"Will be called by Supabase Auth each time a new JWT is created. It should return the claims you wish to be present in the JWT.",enabledKey:"HOOK_CUSTOM_ACCESS_TOKEN_ENABLED",uriKey:"HOOK_CUSTOM_ACCESS_TOKEN_URI",secretsKey:"HOOK_CUSTOM_ACCESS_TOKEN_SECRETS",enterprise:!1},{title:"MFA Verification Attempt hook",subtitle:"Will be called by Supabase Auth each time a user tries to verify an MFA factor. Return a decision on whether to reject the attempt and future ones, or to allow the user to keep trying.",enabledKey:"HOOK_MFA_VERIFICATION_ATTEMPT_ENABLED",uriKey:"HOOK_MFA_VERIFICATION_ATTEMPT_URI",secretsKey:"HOOK_MFA_VERIFICATION_ATTEMPT_SECRETS",enterprise:!0},{title:"Password Verification Attempt hook",subtitle:"Will be called by Supabase Auth each time a user tries to sign in with a password. Return a decision whether to allow the user to reject the attempt, or to allow the user to keep trying.",enabledKey:"HOOK_PASSWORD_VERIFICATION_ATTEMPT_ENABLED",uriKey:"HOOK_PASSWORD_VERIFICATION_ATTEMPT_URI",secretsKey:"HOOK_PASSWORD_VERIFICATION_ATTEMPT_SECRETS",enterprise:!0}],R=(e,t)=>{if(e.startsWith("https"))return{type:"https",url:e,secret:t||""};{let[t,s,n,r,a]=(e||"").split("/");return{type:"postgres",schema:r||"",functionName:a||""}}},O=e=>"postgres"===e.method.type&&e.method.schema.length>0&&e.method.functionName.length>0||"https"===e.method.type&&e.method.url.startsWith("https")&&e.method.secret.length>0,H=(e,t)=>["-- Revoke access to function from supabase_auth_admin\nrevoke execute on function ".concat(e,".").concat(t," from supabase_auth_admin;"),"-- Revoke access to schema from supabase_auth_admin\nrevoke usage on schema ".concat(e," from supabase_auth_admin;"),"-- Restore function permissions to authenticated, anon and public\ngrant execute on function ".concat(e,".").concat(t," to authenticated, anon, public;")],M=e=>{var t;let{buttonText:s="Add hook",onSelectHook:a}=e,{ref:l}=(0,o.UO)(),i=(0,C.l)(),{data:c}=(0,k.Gl)({orgSlug:null==i?void 0:i.slug},{enabled:_.Qy}),{data:d}=(0,h.$E)({projectRef:l}),u=(0,S.Xo)(r.KA.AUTH_EXECUTE,"*"),m=A.map(e=>({...e,enabled:(null==d?void 0:d[e.enabledKey])||!1,method:R((null==d?void 0:d[e.uriKey])||"",(null==d?void 0:d[e.secretsKey])||"")})),f=m.filter(e=>!O(e)&&!e.enterprise),p=m.filter(e=>!O(e)&&e.enterprise),x=(null==c?void 0:c.plan.id)==="team"||(null==c?void 0:c.plan.id)==="enterprise";return u?(0,n.jsxs)(T.h_,{modal:!1,"data-sentry-element":"DropdownMenu","data-sentry-component":"AddHookDropdown","data-sentry-source-file":"AddHookDropdown.tsx",children:[(0,n.jsx)(T.$F,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddHookDropdown.tsx",children:(0,n.jsx)(E.z,{type:"primary",iconRight:(0,n.jsx)(N.Z,{className:"w-4 h-4",strokeWidth:1}),"data-sentry-element":"Button","data-sentry-source-file":"AddHookDropdown.tsx",children:s})}),(0,n.jsxs)(T.AW,{className:"w-76",align:"end","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddHookDropdown.tsx",children:[(0,n.jsx)("div",{children:f.map(e=>(0,n.jsx)(T.Xi,{onClick:()=>a(e.title),children:e.title},e.title))}),(0,n.jsx)(T.VD,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"AddHookDropdown.tsx"}),!x&&(0,n.jsxs)(T.Ju,{className:"grid gap-1 bg-surface-200",children:[(0,n.jsx)("p",{className:"text-foreground-light",children:"Team or Enterprise Plan required"}),(0,n.jsxs)("p",{className:"text-foreground-lighter text-xs",children:["The following hooks are not available on"," ",(0,n.jsx)("a",{target:"_href",href:"https://supabase.com/dashboard/org/".concat(null!==(t=null==i?void 0:i.slug)&&void 0!==t?t:"_","/billing"),className:"underline",children:"your plan"}),"."]})]}),p.map(e=>x?(0,n.jsx)(T.Xi,{disabled:!x,className:"",onClick:()=>a(e.title),children:e.title},e.title):(0,n.jsx)(T.Xi,{disabled:!x,onClick:()=>a(e.title),children:e.title},e.title))]})]}):(0,n.jsx)(w.u,{disabled:!0,type:"primary",tooltip:{content:{side:"bottom",text:"You need additional permissions to add auth hooks"}},children:s})};var K=s(78751),I=s(98686),V=s(98773),z=s.n(V),Z=s(86848),P=s(87831),L=s(5394),D=s(29979),F=s(84552),W=s(66902),U=s(72271),B=s(11221),q=s(49142),X=s(62210),G=s(67783),Q=s(56740),J=s(78366);let Y="create-edit-auth-hook",$=L.Ry({hookType:L.Z_(),enabled:L.O7(),selectedType:L.G0([L.i0("https"),L.i0("postgres")]),httpsValues:L.Ry({url:L.Z_(),secret:L.Z_()}),postgresValues:L.Ry({schema:L.Z_(),functionName:L.Z_()})}).superRefine((e,t)=>("https"!==e.selectedType||(e.httpsValues.url.startsWith("https://")||t.addIssue({path:["httpsValues","url"],code:L.NL.custom,message:"The URL must start with https://"}),e.httpsValues.secret||t.addIssue({path:["httpsValues","secret"],code:L.NL.custom,message:"Missing secret value"})),"postgres"!==e.selectedType||(e.postgresValues.schema||t.addIssue({path:["postgresValues","schema"],code:L.NL.custom,message:"You must select a schema"}),e.postgresValues.functionName||t.addIssue({path:["postgresValues","functionName"],code:L.NL.custom,message:"You must select a Postgres function"})),!0)),ee=e=>{let{visible:t,title:s,authConfig:r,onClose:c,onDelete:u}=e,{ref:h}=(0,o.UO)(),{project:m}=(0,i.d2)(),f=(0,a.useMemo)(()=>A.find(e=>e.title===s)||A[0],[s]),p="HOOK_SEND_EMAIL_ENABLED"===f.enabledKey?["json","jsonb","void"]:["json","jsonb"],x=(0,a.useMemo)(()=>({...f,enabled:(null==r?void 0:r[f.enabledKey])||!1,method:R((null==r?void 0:r[f.uriKey])||"",(null==r?void 0:r[f.secretsKey])||"")}),[f,r]),y=!O(x),v=(0,Z.cI)({resolver:(0,K.F)($),defaultValues:{hookType:s||"",enabled:!0,selectedType:"postgres",httpsValues:{url:"",secret:""},postgresValues:{schema:"public",functionName:""}}}),N=v.watch(),w=(0,a.useMemo)(()=>{let e=[];return"postgres"===x.method.type&&""!==x.method.schema&&""!==x.method.functionName&&x.method.functionName!==N.postgresValues.functionName&&(e=H(x.method.schema,x.method.functionName)),""!==N.postgresValues.functionName&&(e=[...e,"-- Grant access to function to supabase_auth_admin\ngrant execute on function ".concat(N.postgresValues.schema,".").concat(N.postgresValues.functionName," to supabase_auth_admin;"),"-- Grant access to schema to supabase_auth_admin\ngrant usage on schema ".concat(N.postgresValues.schema," to supabase_auth_admin;"),"-- Revoke function permissions from authenticated, anon and public\nrevoke execute on function ".concat(N.postgresValues.schema,".").concat(N.postgresValues.functionName," from authenticated, anon, public;")]),e},[x,N.postgresValues.schema,N.postgresValues.functionName]),{mutate:k,isLoading:S}=g({onSuccess:()=>{l.Am.success("Successfully created ".concat(N.hookType,".")),w.length>0&&(0,j.R)({projectRef:h,connectionString:m.connectionString,sql:w.join("\n")}),c()},onError:e=>{l.Am.error("Failed to create hook: ".concat(e.message))}}),C=async e=>{if(!m)return console.error("Project is required");let t=A.find(t=>e.hookType===t.title);if(!t)return;let s=t.enabledKey,n=t.uriKey,r=t.secretsKey,a="";a="postgres"===e.selectedType?"pg-functions://postgres/".concat(e.postgresValues.schema,"/").concat(e.postgresValues.functionName):e.httpsValues.url,k({projectRef:h,config:{[s]:e.enabled,[n]:a,[r]:"https"===e.selectedType?e.httpsValues.secret:null}})};return(0,a.useEffect)(()=>{if(t){if(f){let e=R((null==r?void 0:r[f.uriKey])||"",(null==r?void 0:r[f.secretsKey])||"");v.reset({hookType:f.title,enabled:(null==r?void 0:r[f.enabledKey])||!1,selectedType:e.type,httpsValues:{url:"https"===e.type&&e.url||"",secret:"https"===e.type&&e.secret||""},postgresValues:{schema:"postgres"===e.type&&e.schema||"public",functionName:"postgres"===e.type&&e.functionName||""}})}else v.reset({hookType:s||"",enabled:!0,selectedType:"postgres",httpsValues:{url:"",secret:""},postgresValues:{schema:"public",functionName:""}})}},[r,s,t,f]),(0,n.jsx)(U.yo,{open:t,onOpenChange:()=>c(),"data-sentry-element":"Sheet","data-sentry-component":"CreateHookSheet","data-sentry-source-file":"CreateHookSheet.tsx",children:(0,n.jsxs)(U.ue,{size:"lg",showClose:!1,className:"flex flex-col gap-0","data-sentry-element":"SheetContent","data-sentry-source-file":"CreateHookSheet.tsx",children:[(0,n.jsx)(U.Tu,{className:"py-3 flex flex-row justify-between items-center border-b-0","data-sentry-element":"SheetHeader","data-sentry-source-file":"CreateHookSheet.tsx",children:(0,n.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,n.jsxs)(U.sw,{className:(0,b.cn)("text-muted hover:text ring-offset-background transition-opacity hover:opacity-100","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:pointer-events-none data-[state=open]:bg-secondary","transition"),"data-sentry-element":"SheetClose","data-sentry-source-file":"CreateHookSheet.tsx",children:[(0,n.jsx)(I.Z,{className:"h-3 w-3","data-sentry-element":"X","data-sentry-source-file":"CreateHookSheet.tsx"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,n.jsx)(U.bC,{className:"truncate","data-sentry-element":"SheetTitle","data-sentry-source-file":"CreateHookSheet.tsx",children:y?"Add ".concat(s):"Update ".concat(s)})]})}),(0,n.jsx)(B.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"CreateHookSheet.tsx"}),(0,n.jsx)(U.DN,{className:"overflow-auto flex-grow px-0","data-sentry-element":"SheetSection","data-sentry-source-file":"CreateHookSheet.tsx",children:(0,n.jsx)(q.l0,{...v,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateHookSheet.tsx",children:(0,n.jsxs)("form",{id:Y,className:"space-y-6 w-full py-5 flex-1",onSubmit:v.handleSubmit(C),children:[(0,n.jsx)(q.Wi,{name:"enabled",control:v.control,render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{layout:"flex",className:"px-5",label:"Enable ".concat(N.hookType),description:"Send SMS hook"===N.hookType?"SMS Provider settings will be disabled in favor of SMS hooks":void 0,children:(0,n.jsx)(q.NI,{children:(0,n.jsx)(X.r,{checked:t.value,onCheckedChange:t.onChange,disabled:t.disabled})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateHookSheet.tsx"},"enabled"),(0,n.jsx)(B.Z,{"data-sentry-element":"Separator","data-sentry-source-file":"CreateHookSheet.tsx"}),(0,n.jsx)(q.Wi,{control:v.control,name:"selectedType",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{label:"Hook type",className:"px-5",children:(0,n.jsx)(q.NI,{children:(0,n.jsxs)(G.W,{value:t.value,onValueChange:e=>t.onChange(e),children:[(0,n.jsx)(G.j,{value:"postgres",id:"postgres",label:"Postgres",description:"Used to call a Postgres function."},"postgres"),(0,n.jsx)(G.j,{value:"https",id:"https",label:"HTTPS",description:"Used to call any HTTPS endpoint."},"https")]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateHookSheet.tsx"}),"postgres"===N.selectedType?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-8 px-5",children:[(0,n.jsx)(q.Wi,{control:v.control,name:"postgresValues.schema",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{label:"Postgres Schema",description:"Postgres schema where the function is defined",children:(0,n.jsx)(q.NI,{children:(0,n.jsx)(W.Z,{size:"small",showError:!1,selectedSchemaName:t.value,onSelectSchema:e=>t.onChange(e),disabled:t.disabled})})})}},"postgresValues.schema"),(0,n.jsx)(q.Wi,{control:v.control,name:"postgresValues.functionName",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{label:"Postgres function",description:"This function will be called by Supabase Auth each time the hook is triggered",children:(0,n.jsx)(q.NI,{children:(0,n.jsx)(F.Z,{size:"small",schema:N.postgresValues.schema,value:t.value,onChange:t.onChange,disabled:t.disabled,filterFunction:e=>{if(p.includes(e.return_type)){let{value:t}=(0,D.cK)(e.argument_types);return 1===t.length&&("json"===t[0].type||"jsonb"===t[0].type)}return!1},noResultsLabel:(0,n.jsxs)("span",{children:["No function with a single JSON/B argument",(0,n.jsx)("br",{}),"and JSON/B","HOOK_SEND_EMAIL_ENABLED"===f.enabledKey?" or void":""," ","return type found in this schema."]})})})})}},"postgresValues.functionName")]}),(0,n.jsxs)("div",{className:"h-72 w-full gap-3 flex flex-col",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light px-5",children:"The following statements will be executed on the selected function:"}),(0,n.jsx)(d.Z,{id:"postgres-hook-editor",isReadOnly:!0,language:"pgsql",value:w.join("\n\n")})]})]}):(0,n.jsxs)("div",{className:"flex flex-col gap-4 px-5",children:[(0,n.jsx)(q.Wi,{control:v.control,name:"httpsValues.url",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{label:"URL",description:"Supabase Auth will send a HTTPS POST request to this URL each time the hook is triggered.",children:(0,n.jsx)(q.NI,{children:(0,n.jsx)(Q.I,{...t})})})}},"httpsValues.url"),(0,n.jsx)(q.Wi,{control:v.control,name:"httpsValues.secret",render:e=>{let{field:t}=e;return(0,n.jsx)(J.E,{label:"Secret",description:(0,n.jsx)(P.D,{children:"It should be a base64 encoded hook secret with a prefix `v1,whsec_`. `v1` denotes the signature version, and `whsec_` signifies a symmetric secret."}),children:(0,n.jsx)(q.NI,{children:(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)(Q.I,{...t,className:"rounded-r-none border-r-0"}),(0,n.jsx)(E.z,{type:"default",size:"small",className:"rounded-l-none",onClick:()=>{let e=function(){let e=z()(60).toString("base64");return"v1,whsec_".concat(e)}();v.setValue("httpsValues.secret",e)},children:"Generate secret"})]})})})}},"httpsValues.secret")]})]})})}),(0,n.jsxs)(U.FF,{"data-sentry-element":"SheetFooter","data-sentry-source-file":"CreateHookSheet.tsx",children:[!y&&(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(E.z,{type:"danger",onClick:()=>u(),children:"Delete hook"})}),(0,n.jsx)(E.z,{disabled:S,type:"default",onClick:()=>c(),"data-sentry-element":"Button","data-sentry-source-file":"CreateHookSheet.tsx",children:"Cancel"}),(0,n.jsx)(E.z,{form:Y,htmlType:"submit",disabled:S,loading:S,"data-sentry-element":"Button","data-sentry-source-file":"CreateHookSheet.tsx",children:y?"Create hook":"Update hook"})]})]})})};var et=s(61138),es=s(62507),en=s(51571),er=s(73565),ea=s(45536);let el=e=>{let{hook:t,onSelect:s}=e,a=(0,S.Xo)(r.KA.AUTH_EXECUTE,"*");return(0,n.jsxs)("div",{className:"bg-surface-100 border-default overflow-hidden border shadow px-5 py-4 flex flex-row first:rounded-t-md last:rounded-b-md space-x-4","data-sentry-component":"HookCard","data-sentry-source-file":"HookCard.tsx",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(et.Z,{size:21,strokeWidth:"1","data-sentry-element":"Webhook","data-sentry-source-file":"HookCard.tsx"})}),(0,n.jsxs)("div",{className:"flex flex-col flex-0 overflow-y-auto w-full",children:[(0,n.jsx)("span",{className:"text-sm text-foreground",children:t.title}),(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:t.subtitle}),(0,n.jsx)("div",{className:"text-sm flex flex-row space-x-5 py-4",children:"postgres"===t.method.type?(0,n.jsxs)("div",{className:"flex flex-col w-full space-y-2",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"type"}),(0,n.jsx)("span",{className:"text-foreground",children:"Postgres function"})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"schema"}),(0,n.jsx)(en.Z,{title:t.method.schema,copy:!0,readOnly:!0,disabled:!0,className:"input-mono [&>div>div>div>input]:text-xs [&>div>div>div>input]:opacity-100 flex-1",value:t.method.schema,onCopy:()=>"postgres"===t.method.type&&(0,ea.vQ)(t.method.schema)})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"function"}),(0,n.jsx)(en.Z,{title:t.method.functionName,copy:!0,readOnly:!0,disabled:!0,className:"input-mono [&>div>div>div>input]:text-xs [&>div>div>div>input]:opacity-100 flex-1",value:t.method.functionName,onCopy:()=>"postgres"===t.method.type&&(0,ea.vQ)(t.method.functionName)})]})]}):(0,n.jsxs)("div",{className:"flex flex-col w-full space-y-2",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"type"}),(0,n.jsx)("span",{className:"text-foreground",children:"HTTPS endpoint"})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"endpoint"}),(0,n.jsx)(en.Z,{title:t.method.url,copy:!0,readOnly:!0,disabled:!0,className:"input-mono [&>div>div>div>input]:text-xs [&>div>div>div>input]:opacity-100 flex-1",value:t.method.url,onCopy:()=>"https"===t.method.type&&(0,ea.vQ)(t.method.url)})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light w-20",children:"secret"}),(0,n.jsx)(en.Z,{copy:!0,title:t.method.secret,reveal:!0,readOnly:!0,disabled:!0,className:"input-mono [&>div>div>div>input]:text-xs [&>div>div>div>input]:opacity-100 flex-1",value:t.method.secret})]})]})}),(0,n.jsx)("div",{className:"flex flex-row gap-2",children:(0,n.jsx)(w.u,{type:"default",disabled:!a,onClick:()=>s(),tooltip:{content:{side:"bottom",text:a?void 0:"You need additional permissions to configure auth hooks"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HookCard.tsx",children:"Configure hook"})})]}),(0,n.jsx)("div",{className:"flex-1",children:t.enabled?(0,n.jsxs)(er.C,{className:"space-x-1",variant:"brand",children:[(0,n.jsx)("div",{className:"h-3.5 w-3.5 bg-brand rounded-full flex justify-center items-center",children:(0,n.jsx)(es.Z,{className:"h-2 w-2 text-background-overlay ",strokeWidth:6})}),(0,n.jsx)("span",{children:"Enabled"})]}):(0,n.jsx)(er.C,{variant:"warning",children:(0,n.jsx)("span",{children:"Disabled"})})})]})},eo=()=>{let{ref:e}=(0,o.UO)(),{project:t}=(0,i.d2)(),{data:s,error:r,isError:m}=(0,h.$E)({projectRef:e}),[f,p]=(0,a.useState)(null),[x,y]=(0,a.useState)(null),{mutate:N,isLoading:w}=g({onSuccess:async()=>{if(!x)return;let{method:s}=x;if("postgres"===s.type){let n=H(s.schema,s.functionName);await (0,j.R)({projectRef:e,connectionString:t.connectionString,sql:n.join("\n")})}l.Am.success("".concat(x.title," has been deleted.")),y(null),p(null)},onError:e=>{l.Am.error("Failed to delete hook: ".concat(e.message))}}),k=A.map(e=>({...e,enabled:(null==s?void 0:s[e.enabledKey])||!1,method:R((null==s?void 0:s[e.uriKey])||"",(null==s?void 0:s[e.secretsKey])||"")}));return m?(0,n.jsx)(c.Z,{error:r,subject:"Failed to retrieve auth configuration for hooks"}):(0,n.jsxs)("div",{className:"pb-4","data-sentry-component":"HooksListing","data-sentry-source-file":"HooksListing.tsx",children:[(0,n.jsx)(u.p,{title:"All hooks",actions:(0,n.jsx)(M,{onSelectHook:p}),"data-sentry-element":"FormHeader","data-sentry-source-file":"HooksListing.tsx"}),0===k.filter(e=>O(e)).length&&(0,n.jsxs)("div",{className:"border rounded border-default px-20 py-16 flex flex-col items-center justify-center space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"No hooks configured yet"}),(0,n.jsx)(M,{buttonText:"Add a new hook",onSelectHook:p})]}),(0,n.jsx)("div",{className:"-space-y-px",children:k.filter(e=>O(e)).map(e=>(0,n.jsx)(el,{hook:e,onSelect:()=>p(e.title)},e.enabledKey))}),(0,n.jsx)(ee,{title:f,visible:!!f,onDelete:()=>{let e=k.find(e=>e.title===f);e&&y(e)},onClose:()=>p(null),authConfig:s,"data-sentry-element":"CreateHookSheet","data-sentry-source-file":"HooksListing.tsx"}),(0,n.jsx)(v.Z,{visible:!!x,size:"large",variant:"destructive",loading:w,title:"Confirm to delete ".concat(null==x?void 0:x.title),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>y(null),onConfirm:()=>{x&&N({projectRef:e,config:{[x.enabledKey]:!1,[x.uriKey]:null,[x.secretsKey]:null}})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"HooksListing.tsx",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to delete the ",null==x?void 0:x.title,"?"]}),(null==x?void 0:x.method.type)==="postgres"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["The following statements will be executed on the"," ",null==x?void 0:x.method.schema,".",null==x?void 0:x.method.functionName," function:"]}),(0,n.jsx)("div",{className:(0,b.cn)("mt-4","h-72"),children:(0,n.jsx)(d.Z,{id:"deletion-hook-editor",isReadOnly:!0,language:"pgsql",value:H(null==x?void 0:x.method.schema,null==x?void 0:x.method.functionName).join("\n\n")})})]})]})})]})};var ei=s(7539),ec=s(78066),ed=s(61767),eu=s(95767);let eh=()=>{let e=(0,S.Xo)(r.KA.READ,"custom_config_gotrue");return(0,S.N4)()&&!e?(0,n.jsx)(ed.Z,{isFullPage:!0,resourceText:"access your project's auth hooks"}):(0,n.jsxs)("div",{children:[(0,n.jsx)(ec.tU,{className:"pb-0",children:(0,n.jsxs)(ec._S,{id:"auth-page-top",children:[(0,n.jsx)(ec.q7,{children:"Auth Hooks"}),(0,n.jsx)(ec.FW,{children:"Use Postgres functions or HTTP endpoints to customize the behavior of Supabase Auth to meet your needs"})]})}),(0,n.jsx)(ec._S,{className:"my-8 space-y-8",children:(0,n.jsx)(eo,{})})]})};eh.getLayout=e=>(0,n.jsx)(eu.Z,{children:(0,n.jsx)(ei.Z,{children:e})});var em=eh},94059:function(e,t,s){"use strict";s.d(t,{ZP:function(){return h}});var n=s(97458),r=s(52983),a=s(25843),l=s(65092);function o(e){let{children:t,className:s,tag:r="div",style:a}=e;return(0,n.jsx)("".concat(r),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:s=1,children:r,style:a}=e;return(0,n.jsx)("h".concat(s),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:r})},o.Text=function(e){let{className:t,children:s,style:r,type:a,disabled:l,mark:o,code:i,keyboard:c,underline:d,strikethrough:u,strong:h,small:m}=e;return i?(0,n.jsx)("code",{style:r,children:s}):o?(0,n.jsx)("mark",{style:r,children:s}):c?(0,n.jsx)("kbd",{style:r,children:s}):h?(0,n.jsx)("strong",{style:r,children:s}):(0,n.jsx)("span",{style:r,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},o.Link=function(e){let{children:t,target:s="_blank",href:r,className:a,onClick:l,style:o}=e;return(0,n.jsx)("a",{onClick:l,href:r,target:s,rel:"noopener noreferrer",style:o,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let i=(0,r.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,n.jsx)(i.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:r,style:a,type:l="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:a,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(c,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("ul",{className:r,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:r,rounded:o,onClick:i,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:h}=e,m=(0,a.Z)("menu"),{type:f}=d(),p=[m.item.base];p.push(m.item.variants[f].base),r?p.push(m.item.variants[f].active):p.push(m.item.variants[f].normal);let x=[m.item.content.base];r?x.push(m.item.content.active):x.push(m.item.content.normal);let y=[m.item.icon.base];return r?y.push(m.item.icon.active):y.push(m.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:h,onClick:i,"aria-current":r?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:s}),(0,n.jsx)("span",{className:x.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:r}=e,l=(0,a.Z)("menu"),{type:o}=d();return(0,n.jsxs)("div",{className:[l.group.base,l.group.variants[o]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("span",{className:l.group.icon,children:s}),(0,n.jsx)("span",{className:l.group.content,children:r}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(o.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("span",{children:t})})})};var h=u},67783:function(e,t,s){"use strict";s.d(t,{W:function(){return c},j:function(){return d}});var n=s(97458),r=s(11908),a=s(52983),l=s(17432),o=s(36155),i=s(65092);let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.fC,{className:(0,i.cn)("flex flex-col -space-y-px w-full",s),...a,ref:t})});c.displayName="RadioGroupStacked";let d=a.forwardRef((e,t)=>{let{image:s,label:a,showIndicator:c=!0,...d}=e;return(0,n.jsx)(r.ck,{ref:t,...d,className:(0,i.cn)("flex flex-col gap-2","w-full","bg-overlay/50 disabled:opacity-50","border","first-of-type:rounded-t-lg last-of-type:rounded-b-lg","shadow-sm","enabled:hover:bg-surface-300","enabled:hover:border-foreground-muted","enabled:cursor-pointer disabled:cursor-not-allowed","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground-muted","transition","group",d.className),children:(0,n.jsxs)("div",{className:"flex gap-3 w-full px-[21px] py-3",children:[c&&(0,n.jsx)("div",{className:(0,i.cn)("aspect-square h-4 w-4 min-w-4 min-h-4","rounded-full border group-data-[state=checked]:border-foreground-muted","group-focus:border-foreground-muted","group-hover:border-foreground-muted","ring-offset-background","group-focus:outline-none","group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2","flex items-center justify-center","transition"),children:(0,n.jsx)(r.z$,{className:"flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-0.25 items-start",children:[(0,n.jsx)(o._,{htmlFor:d.value,className:(0,i.cn)("block","-mt-[0.15rem]","text-sm transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground"),children:a}),d.description&&(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:d.description}),d.children]})]})})});d.displayName="RadioGroupStackedItem"},62210:function(e,t,s){"use strict";s.d(t,{r:function(){return d}});var n=s(97458),r=s(56384),a=s(31706),l=s(52983),o=s(65092);let i=(0,a.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),c=(0,a.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=l.forwardRef((e,t)=>{let{className:s,size:a,...l}=e;return(0,n.jsx)(r.fC,{className:(0,o.cn)(i({size:a}),s),...l,ref:t,children:(0,n.jsx)(r.bU,{className:(0,o.cn)(c({size:a}))})})});d.displayName=r.fC.displayName},98773:function(e,t,s){"use strict";var n=s(73656),r=s(21607).Buffer,a=s.g.crypto||s.g.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw RangeError("requested too many random bytes");var s=r.allocUnsafe(e);if(e>0){if(e>65536)for(var l=0;l<e;l+=65536)a.getRandomValues(s.slice(l,l+65536));else a.getRandomValues(s)}return"function"==typeof t?n.nextTick(function(){t(null,s)}):s}:e.exports=function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},21607:function(e,t,s){var n=s(15313),r=n.Buffer;function a(e,t){for(var s in e)t[s]=e[s]}function l(e,t,s){return r(e,t,s)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=l),l.prototype=Object.create(r.prototype),a(r,l),l.from=function(e,t,s){if("number"==typeof e)throw TypeError("Argument must not be a number");return r(e,t,s)},l.alloc=function(e,t,s){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=r(e);return void 0!==t?"string"==typeof s?n.fill(t,s):n.fill(t):n.fill(0),n},l.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r(e)},l.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}}},function(e){e.O(0,[6665,7623,588,305,6402,1864,8703,1018,4975,4376,9621,3954,659,9911,3760,4637,8069,9344,9192,6739,4098,902,3174,2495,4847,1379,272,2047,2728,6976,5767,9774,2888,179],function(){return e(e.s=50836)}),_N_E=e.O()}]);