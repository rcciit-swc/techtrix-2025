!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2727b9c5-063b-4a93-ada9-424e821a9260",e._sentryDebugIdIdentifier="sentry-dbid-2727b9c5-063b-4a93-ada9-424e821a9260")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6796],{8660:function(e){e.exports=function(e,n,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;){var i=e[s];n(a,i,t(i),e)}return a}},3792:function(e,n,t){var a=t(61701);e.exports=function(e,n,t,s){return a(e,function(e,a,r){n(s,e,t(e),r)}),s}},48318:function(e,n,t){var a=t(84546),s=t(45436),r=t(99105),i=t(29233),l=t(31525),o=t(77026);e.exports=function(e,n,t,c){var d=-1,u=s,m=!0,x=e.length,p=[],h=n.length;if(!x)return p;t&&(n=i(n,l(t))),c?(u=r,m=!1):n.length>=200&&(u=o,m=!1,n=new a(n));e:for(;++d<x;){var f=e[d],g=null==t?f:t(f);if(f=c||0!==f?f:0,m&&g==g){for(var y=h;y--;)if(n[y]===g)continue e;p.push(f)}else u(n,g,c)||p.push(f)}return p}},17325:function(e,n,t){var a=t(8660),s=t(3792),r=t(55833),i=t(55589);e.exports=function(e,n){return function(t,l){var o=i(t)?a:s,c=n?n():{};return o(t,e,r(l,2),c)}}},40916:function(e,n,t){var a=t(54466),s=t(55589);e.exports=function(e,n,t,r){return null==e?[]:(s(n)||(n=null==n?[]:[n]),s(t=r?void 0:t)||(t=null==t?[]:[t]),a(e,n,t))}},50663:function(e,n,t){var a=t(17325)(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});e.exports=a},92238:function(e,n,t){var a=t(48318),s=t(29735),r=t(18268),i=s(function(e,n){return r(e)?a(e,n):[]});e.exports=i},99739:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/indexes",function(){return t(21218)}])},67628:function(e,n,t){"use strict";t.d(n,{Q:function(){return l}});var a=t(97458),s=t(94059),r=t(73565),i=t(55228),l=e=>{let{page:n,menu:t}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(s.ZP,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:t.map((e,l)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.ZP.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let t=e.pages?e.pages.includes(null!=n?n:""):n===e.key;return(0,a.jsx)(i.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:t,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==t.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},38889:function(e,n,t){"use strict";t.d(n,{H:function(){return c}});var a=t(28894),s=t(6464),r=t(33715),i=t(62432),l=t(37756);async function o(e,n){let{projectRef:t,connectionString:a}=e;if(!t)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:i,error:l}=await (0,s.U2)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a},path:{ref:t}},headers:r,signal:n});return l&&(0,s.S3)(l),i}let c=function(e){let{projectRef:n,connectionString:t}=e,{enabled:s=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,i.Vm)(),u=(null==d?void 0:d.status)===l.S.ACTIVE_HEALTHY;return(0,a.a)(r.o.list(n),e=>{let{signal:a}=e;return o({projectRef:n,connectionString:t},a)},{enabled:s&&void 0!==n&&u,...c})}},74179:function(e,n,t){"use strict";t.d(n,{LW:function(){return u},bn:function(){return h}});var a=t(36457),s=t(64618),r=t(34549),i=t(15538),l=t.n(i),o=t(25878),c=t(74476),d=t(7324);let u="pgmq_public",m=l()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),x=l()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function p(e){let{projectRef:n,connectionString:t,enable:a}=e,{result:s}=await (0,o.R)({projectRef:n,connectionString:t,sql:a?m:x,queryKey:["toggle-queues-exposure"]});return s}let h=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.NL)();return(0,s.D)(e=>p(e),{async onSuccess(n,t,a){let{projectRef:s}=t;await i.invalidateQueries(c.a.exposePostgrestStatus(s)),i.invalidateQueries(d.A.schemas(s)),await (null==e?void 0:e(n,t,a))},async onError(e,t,a){void 0===n?r.Am.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):n(e,t,a)},...t})}},74476:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,n,t)=>["projects",e,"queue-messages",n,t].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,n)=>["projects",e,"queue-metrics",n],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},92563:function(e,n,t){"use strict";t.d(n,{Kz:function(){return o}});var a=t(28894),s=t(25878),r=t(7324);let i=e=>{let{table:n,schema:t}=e,a=[];n&&a.push("tablename = '".concat(n,"'")),t&&a.push("schemaname = '".concat(t,"'"));let s=a.length>0?"WHERE ".concat(a.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(s,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()};async function l(e,n){let{projectRef:t,connectionString:a,table:r,schema:l}=e,o=i({table:r,schema:l}),{result:c}=await (0,s.R)({projectRef:t,connectionString:a,sql:o,queryKey:["table-columns",l,r]},n);return c}let o=function(e){let{projectRef:n,connectionString:t,schema:s,table:i}=e,{enabled:o=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(r.A.tableColumns(n,s,i),e=>{let{signal:a}=e;return l({projectRef:n,connectionString:t,schema:s,table:i},a)},{enabled:o&&void 0!==n,...c})}},17319:function(e,n,t){"use strict";t.d(n,{B:function(){return o}});var a=t(62213),s=t(52983),r=t(12436),i=t(37756);let l=e=>(0,a.v1)("schema",a.Oi.withDefault(e)),o=()=>{let{ref:e}=(0,r.UO)(),n=e&&e.length>0&&window.localStorage.getItem(i.dA.LAST_SELECTED_SCHEMA(e))||"public",[t,a]=l((0,s.useMemo)(()=>n,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(i.dA.LAST_SELECTED_SCHEMA(e),t)},[t,e]),{selectedSchema:t,setSelectedSchema:a}}},96444:function(e,n,t){"use strict";t.d(n,{T:function(){return s},s:function(){return a}});let a=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",t(74179).LW],s=a.filter(e=>"extensions"!==e)},13510:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});let a=(0,t(98266).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},7676:function(e,n,t){"use strict";t.d(n,{b:function(){return d}});var a=t(97458),s=t(52983),r=t(42155),i=t(90839),l=t(10947),o=t(96444),c=t(44735);let d=e=>{let{visible:n,onClose:t}=e;return(0,a.jsx)(r.Z,{size:"medium",visible:n,header:"Schemas managed by Supabase",customFooter:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(i.z,{type:"default",onClick:()=>t(),children:"Understood"})}),onCancel:()=>t(),"data-sentry-element":"Modal","data-sentry-component":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsxs)(r.Z.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:o.s.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};n.Z=e=>{let{schema:n,entity:t}=e,[r,o]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.bZ,{"data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)(c.Z,{strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(l.Cd,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:["Currently viewing ",t," from a protected schema"]}),(0,a.jsxs)(l.X,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsx)(i.z,{type:"default",size:"tiny",onClick:()=>o(!0),"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Learn more"})]})]}),(0,a.jsx)(d,{visible:r,onClose:()=>o(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx"})]})}},32500:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var a=t(97458),s=t(32691),r=t(65921),i=t(67628),l=t(38889),o=t(9108),c=t(62432),d=t(58326),u=t(86976),m=t(37756),x=t(13510);let p=(e,n)=>{var t;let s=null!==(t=null==e?void 0:e.ref)&&void 0!==t?t:"default",{pgNetExtensionExists:r,pitrEnabled:i,columnLevelPrivileges:l}=n||{};return[{title:"Database Management",items:[{name:"Schema Visualizer",key:"schemas",url:"/project/".concat(s,"/database/schemas"),items:[]},{name:"Tables",key:"tables",url:"/project/".concat(s,"/database/tables"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(s,"/database/functions"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(s,"/database/triggers"),items:[]},{name:"Enumerated Types",key:"types",url:"/project/".concat(s,"/database/types"),items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(s,"/database/extensions"),items:[]},{name:"Indexes",key:"indexes",url:"/project/".concat(s,"/database/indexes"),items:[]},{name:"Publications",key:"publications",url:"/project/".concat(s,"/database/publications"),items:[]}]},{title:"Access Control",items:[{name:"Roles",key:"roles",url:"/project/".concat(s,"/database/roles"),items:[]},...l?[{name:"Column Privileges",key:"column-privileges",url:"/project/".concat(s,"/database/column-privileges"),items:[],label:"ALPHA"}]:[],{name:"Policies",key:"policies",url:"/project/".concat(s,"/auth/policies"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]},{title:"Platform",items:[...m.Qy?[{name:"Backups",key:"backups",url:i?"/project/".concat(s,"/database/backups/pitr"):"/project/".concat(s,"/database/backups/scheduled"),items:[]}]:[],{name:"Migrations",key:"migrations",url:"/project/".concat(s,"/database/migrations"),items:[]},{name:"Wrappers",key:"wrappers",url:"/project/".concat(s,"/integrations?category=wrapper"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},...r?[{name:"Webhooks",key:"hooks",url:"/project/".concat(s,"/integrations/webhooks/overview"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]:[]]},{title:"Tools",items:[{name:"Security Advisor",key:"security-advisor",url:"/project/".concat(s,"/advisors/security"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Performance Advisor",key:"performance-advisor",url:"/project/".concat(s,"/advisors/performance"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Query Performance",key:"query-performance",url:"/project/".concat(s,"/advisors/query-performance"),rightIcon:(0,a.jsx)(x.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]}]},h=()=>{let e=(0,c.Vm)(),n=(0,s.useRouter)().pathname.split("/")[4],{data:t}=(0,l.H)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,o.F)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=t?t:[]).find(e=>"pg_net"===e.name),m=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,x=(0,r.ar)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Q,{page:n,menu:p(e,{pgNetExtensionExists:u,pitrEnabled:m,columnLevelPrivileges:x}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})};var f=(0,d.Q)(e=>{let{children:n}=e;return(0,a.jsx)(u.Z,{product:"Database",productMenu:(0,a.jsx)(h,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:n})})},78066:function(e,n,t){"use strict";t.d(n,{CG:function(){return h},FW:function(){return u},I7:function(){return x},Lc:function(){return g},Wv:function(){return j},_S:function(){return m},g$:function(){return f},gW:function(){return b},jX:function(){return p},q7:function(){return d},s_:function(){return o},tM:function(){return y},tU:function(){return c},ur:function(){return v},y:function(){return l}});var a=t(97458),s=t(52983),r=t(86186),i=t(65092);let l="mx-auto w-full max-w-[1200px]",o="px-4 md:px-6 lg:px-14 xl:px-24 2xl:px-28",c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("header",{...s,ref:n,className:(0,i.cn)("w-full","flex-col gap-3 py-6",t)})}),d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h1",{ref:n,...s,className:(0,i.cn)("text-2xl",t)})}),u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("span",{ref:n,...s,className:(0,i.cn)("text-sm text-foreground-light",t)})}),m=s.forwardRef((e,n)=>{let{className:t,bottomPadding:s,...c}=e,{aiAssistantPanel:d}=(0,r.WZ)(),{open:u}=d;return(0,a.jsx)("div",{ref:n,...c,className:(0,i.cn)(l,o,s&&"pb-16",u?"xl:px-6":"",t)})}),x=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("w-full h-px bg-border",t)})}),p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3 py-6","lg:grid md:grid-cols-12 lg:py-12",t)})}),h=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3","min-w-[420px]",t)})}),f=s.forwardRef((e,n)=>{let{className:t,children:s,title:r,...l}=e;return(0,a.jsxs)("div",{ref:n,...l,className:(0,i.cn)("col-span-4 xl:col-span-5 prose text-sm",t),children:[r&&(0,a.jsx)("h2",{children:r}),s]})}),g=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",t)})}),y=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-col gap-3 items-center",t)})}),j=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex w-full items-center",t)})}),v=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)("flex flex-row gap-3",t)})}),b=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,i.cn)(l,o,"my-8 flex flex-col gap-8",t)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",m.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",p.displayName="ScaffoldSection",h.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",b.displayName="ScaffoldContainerLegacy"},24083:function(e,n,t){"use strict";t.d(n,{p:function(){return i}});var a=t(97458),s=t(65092),r=t(67096);let i=e=>{let{title:n,description:t,docsUrl:i,actions:l,className:o}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:n}),t&&(0,a.jsx)("div",{className:"prose text-sm max-w-full",children:t})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==i&&(0,a.jsx)(r.G,{href:i}),l]})]})}},55228:function(e,n,t){"use strict";var a=t(97458),s=t(83145),r=t.n(s),i=t(94059),l=t(73565),o=t(90839);n.Z=e=>{let{name:n="",isActive:t,isExternal:s,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:p="",hoverText:h="",label:f}=e,g=(0,a.jsx)(i.ZP.Item,{icon:c,rounded:!0,active:t,onClick:x,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:h||("string"==typeof n?n:""),className:"flex items-center gap-2 truncate w-full "+p,children:[(0,a.jsxs)("span",{className:"truncate",children:[n," "]}),void 0!==f&&(0,a.jsx)(l.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?s?(0,a.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:n})}):(0,a.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},66902:function(e,n,t){"use strict";var a=t(97458),s=t(198),r=t(50416),i=t(62507),l=t(36950),o=t(52983),c=t(88971),d=t(58015),u=t(90817),m=t(90839),x=t(54135),p=t(10947),h=t(42026),f=t(47482),g=t(64890);n.Z=e=>{let{className:n,disabled:t=!1,size:y="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:b=!1,excludedSchemas:_=[],onSelectSchema:S,onSelectCreateSchema:N}=e,[w,C]=(0,o.useState)(!1),q=(0,u.Xo)(s.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:k}=(0,c.d2)(),{data:E,isLoading:P,isSuccess:I,isError:T,error:Z,refetch:R}=(0,d.Q1)({projectRef:null==k?void 0:k.ref,connectionString:null==k?void 0:k.connectionString}),A=(E||[]).filter(e=>!_.includes(e.name)).sort((e,n)=>e.name.localeCompare(n.name));return(0,a.jsxs)("div",{className:n,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[P&&(0,a.jsx)(m.z,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,a.jsx)(x.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&T&&(0,a.jsxs)(p.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(p.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(p.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==Z?void 0:Z.message]}),(0,a.jsx)(m.z,{type:"default",size:"tiny",onClick:()=>R(),children:"Reload schemas"})]}),I&&(0,a.jsxs)(h.J2,{open:w,onOpenChange:C,modal:!1,children:[(0,a.jsx)(h.xo,{asChild:!0,children:(0,a.jsx)(m.z,{size:y,disabled:t,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(r.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,a.jsx)(h.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,a.jsxs)(f.mY,{children:[(0,a.jsx)(f.sZ,{placeholder:"Find schema..."}),(0,a.jsxs)(f.e8,{children:[(0,a.jsx)(f.rb,{children:"No schemas found"}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(g.x,{className:(A||[]).length>7?"h-[210px]":"",children:[b&&(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S("*"),C(!1)},onClick:()=>{S("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===v&&(0,a.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==A?void 0:A.map(e=>(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S(e.name),C(!1)},onClick:()=>{S(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),v===e.name&&(0,a.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.zz,{}),(0,a.jsx)(f.fu,{children:(0,a.jsxs)(f.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),C(!1)},onClick:()=>{N(),C(!1)},children:[(0,a.jsx)(l.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},21218:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eo}});var a=t(97458),s=t(4839),r=t(50663),i=t.n(r),l=t(71635),o=t.n(l),c=t(52983),d=t(34549),u=t(12436),m=t(88971),x=t(57006),p=t(5529),h=t(5186),f=t(66902),g=t(63621),y=t(28894),j=t(25878),v=t(7324);let b=e=>{let{schema:n}=e;return'\nSELECT schemaname as "schema",\n  tablename as "table",\n  indexname as "name",\n  indexdef as "definition"\nFROM pg_indexes\nWHERE schemaname = \''.concat(n,"';\n").trim()};async function _(e,n){let{schema:t,projectRef:a,connectionString:s}=e;if(!t)throw Error("schema is required");let r=b({schema:t}),{result:i}=await (0,j.R)({projectRef:a,connectionString:s,sql:r,queryKey:["indexes",t]},n);return i}let S=function(e){let{projectRef:n,connectionString:t,schema:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,y.a)(v.A.indexes(n,a),e=>{let{signal:s}=e;return _({projectRef:n,connectionString:t,schema:a},s)},{enabled:s&&void 0!==n&&void 0!==a,...r})};var N=t(58015),w=t(66802),C=t(17319),q=t(96444),k=t(44735),E=t(77270),P=t(74304),I=t(51571),T=t(90839),Z=t(12472),R=t(32002),A=t(7676),L=t(36457),M=t(50416),z=t(62507),D=t(52675),F=t(83145),W=t.n(F),$=t(92563),O=t(83402),G=t(42026),B=t(47482),V=t(64890),H=t(65092),Q=t(22714),U=t(6514),X=t(78366);let J=[{name:"B-Tree",value:"btree",description:"For querying data with equality or range conditions on columns.\nThis is the default index type that Postgres uses."},{name:"Hash",value:"hash",description:"For querying exact matches on columns"},{name:"GiST",value:"gist",description:"For querying complex data types or custom-defined operators"},{name:"SP-GiST",value:"spgist",description:"Similar to GiST, but is more specialized and customizable"},{name:"GIN",value:"gin",description:"For querying multi-valued data such as arrays or full-text search scenarios"},{name:"BRIN",value:"brin",description:"For querying large tables with sorted data"}];var Y=t(62432),K=t(33526),ee=t(67096),en=e=>{var n,t;let{visible:s,onClose:r}=e,i=(0,L.NL)(),{project:l}=(0,m.d2)(),o=(0,Y.Qv)(),[u,x]=(0,c.useState)("public"),[p,f]=(0,c.useState)(void 0),[y,j]=(0,c.useState)([]),[b,_]=(0,c.useState)(J[0].value),[S,C]=(0,c.useState)(!1),[q,k]=(0,c.useState)(!1),[E,P]=(0,c.useState)(""),{data:I}=(0,N.Q1)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:R,isLoading:A}=(0,O.Hp)({schemas:[u],sort:"alphabetical",search:E,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:F,isLoading:en,isSuccess:et}=(0,$.Kz)({schema:u,table:p,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{mutate:ea,isLoading:es}=(0,w.r)({onSuccess:async()=>{await i.invalidateQueries(v.A.indexes(null==l?void 0:l.ref,u)),r(),d.Am.success("Successfully created index")},onError:e=>{d.Am.error("Failed to create index: ".concat(e.message))}}),er=(0,c.useMemo)(()=>(null==R?void 0:R.pages.flatMap(e=>e.data.entities))||[],[null==R?void 0:R.pages]);function ei(e){P(e)}let el=(null!==(t=null==F?void 0:null===(n=F[0])||void 0===n?void 0:n.columns)&&void 0!==t?t:[]).filter(e=>null!==e).map(e=>({id:e.attname,value:e.attname,name:e.attname,disabled:!1})),eo='\nCREATE INDEX ON "'.concat(u,'"."').concat(p,'" USING ').concat(b," (").concat(y.map(e=>'"'.concat(e,'"')).join(", "),");\n").trim(),ec=()=>{if(!l)return console.error("Project is required");ea({projectRef:l.ref,connectionString:l.connectionString,sql:eo})};(0,c.useEffect)(()=>{s&&(x("public"),f(""),j([]),_(J[0].value))},[s]),(0,c.useEffect)(()=>{f(""),j([]),_(J[0].value)},[u]),(0,c.useEffect)(()=>{j([]),_(J[0].value)},[p]);let ed=0===er.length;return(0,a.jsx)(Z.ZP,{size:"large",header:"Create new index",visible:s,onCancel:r,onConfirm:()=>ec(),loading:es,confirmText:"Create index","data-sentry-element":"SidePanel","data-sentry-component":"CreateIndexSidePanel","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)("div",{className:"py-6 space-y-6",children:[(0,a.jsxs)(Z.ZP.Content,{className:"space-y-6","data-sentry-element":"unknown","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.E,{label:"Select a schema",name:"select-schema",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:S,onOpenChange:C,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(T.z,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)(M.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==u&&""!==u?u:"Choose a schema"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:E,onValueChange:ei,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:"No schemas found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.x,{className:(I||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=I?I:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{x(e.name),C(!1)},onClick:()=>{x(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),p===e.name&&(0,a.jsx)(z.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),(0,a.jsx)(X.E,{label:"Select a table",name:"select-table",description:ed&&!A&&"Create a table in this schema via the Table or SQL editor first",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(G.J2,{modal:!1,open:q,onOpenChange:k,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(G.xo,{asChild:!0,disabled:ed||A,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(T.z,{type:"default",size:"medium",className:(0,H.cn)("w-full [&>span]:w-full text-left",""===p&&"text-foreground-lighter"),iconRight:(0,a.jsx)(M.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==p&&""!==p?p:ed?"No tables available in schema":"Choose a table"})}),(0,a.jsx)(G.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(B.mY,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.sZ,{placeholder:"Find table...",value:E,onValueChange:ei,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(B.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(B.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:A?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(D.Z,{size:12,className:"animate-spin"}),"Loading..."]}):"No tables found"}),(0,a.jsx)(B.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(V.x,{className:(er||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=er?er:[]).map(e=>(0,a.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{f(e.name),k(!1)},onClick:()=>{f(e.name),k(!1)},children:[(0,a.jsx)("span",{children:e.name}),p===e.name&&(0,a.jsx)(z.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),p&&(0,a.jsxs)(X.E,{label:"Select up to 32 columns",isReactForm:!1,children:[en&&(0,a.jsx)(g.Z,{className:"py-4"}),et&&(0,a.jsx)(U.m,{options:el,placeholder:"Choose which columns to create an index on",searchPlaceholder:"Search for a column",value:y,onChange:j})]})]}),y.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.ZP.Separator,{}),(0,a.jsxs)(Z.ZP.Content,{className:"space-y-6",children:[(0,a.jsx)(X.E,{label:"Select an index type",name:"selected-index-type",isReactForm:!1,children:(0,a.jsxs)(Q.Ph,{disabled:o,value:b,onValueChange:_,name:"selected-index-type",children:[(0,a.jsx)(Q.i4,{size:"small",children:(0,a.jsx)(Q.ki,{className:"font-mono",children:b})}),(0,a.jsx)(Q.Bw,{children:J.map((e,n)=>(0,a.jsxs)(c.Fragment,{children:[(0,a.jsx)(Q.Ql,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{children:e.name}),e.description.split("\n").map((n,t)=>(0,a.jsx)("span",{className:"text-foreground-lighter group-focus:text-foreground-light group-data-[state=checked]:text-foreground-light",children:n},"".concat(e.value,"-description-").concat(t)))]})}),n<J.length-1&&(0,a.jsx)(Q.U$,{})]},e.name))})]})}),o&&(0,a.jsx)(K.J,{type:"default",className:"!mt-2",title:"OrioleDB currently only supports the B-tree index type",description:"More index types may be supported when OrioleDB is no longer in preview",children:(0,a.jsx)(ee.G,{className:"mt-2",abbrev:!1,href:"https://supabase.com/docs"})})]}),(0,a.jsx)(Z.ZP.Separator,{}),(0,a.jsx)(Z.ZP.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm",children:"Preview of SQL statement"}),(0,a.jsx)(T.z,{asChild:!0,type:"default",children:(0,a.jsx)(W(),{href:void 0!==l?"/project/".concat(l.ref,"/sql/new?content=").concat(eo):"/",children:"Open in SQL Editor"})})]})}),(0,a.jsx)("div",{className:"h-[200px] !mt-2",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(h.Z,{isReadOnly:!0,autofocus:!1,id:"".concat(u,"-").concat(p,"-").concat(y.join(","),"-").concat(b),language:"pgsql",defaultValue:eo})})})]})]})})},et=()=>{var e,n;let{project:t}=(0,m.d2)(),{schema:s,table:r}=(0,u.UO)(),[l,y]=(0,c.useState)(""),{selectedSchema:j,setSelectedSchema:v}=(0,C.B)(),[b,_]=(0,c.useState)(!1),[L,M]=(0,c.useState)(),[z,D]=(0,c.useState)(),{data:F,refetch:W,error:$,isLoading:O,isSuccess:G,isError:B}=S({schema:j,projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{data:V,isLoading:H,isSuccess:Q,isError:U}=(0,N.Q1)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{mutate:X,isLoading:J}=(0,w.r)({onSuccess:async()=>{await W(),D(void 0),d.Am.success("Successfully deleted index")},onError:e=>{d.Am.error("Failed to delete index: ".concat(e.message))}}),[Y]=i()(null!=V?V:[],e=>{var n;return q.s.includes(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"")}),K=null==V?void 0:V.find(e=>e.name===j),ee=Y.some(e=>e.id===(null==K?void 0:K.id)),et=o()(null!=F?F:[],e=>e.name.toLocaleLowerCase()),ea=l.length>0?et.filter(e=>e.name.includes(l)||e.table.includes(l)):et,es=e=>{if(!t)return console.error("Project is required");X({projectRef:t.ref,connectionString:t.connectionString,sql:'drop index if exists "'.concat(e.name,'"')})};return(0,c.useEffect)(()=>{if(void 0!==s){let e=null==V?void 0:V.find(e=>e.name===s);void 0!==e&&v(e.name)}},[s,Q]),(0,c.useEffect)(()=>{void 0!==r&&y(r)},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[H&&(0,a.jsx)(g.Z,{className:"w-[260px]"}),U&&(0,a.jsxs)("div",{className:"w-[260px] text-foreground-light text-sm border px-3 py-1.5 rounded flex items-center space-x-2",children:[(0,a.jsx)(k.Z,{strokeWidth:2,size:16}),(0,a.jsx)("p",{children:"Failed to load schemas"})]}),Q&&(0,a.jsx)(f.Z,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:j,onSelectSchema:v}),(0,a.jsx)(I.Z,{size:"tiny",value:l,className:"w-full lg:w-52",onChange:e=>y(e.target.value),placeholder:"Search for an index",icon:(0,a.jsx)(E.Z,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"Indexes.tsx"}),!ee&&(0,a.jsx)(T.z,{className:"ml-auto flex-grow lg:flex-grow-0",type:"primary",onClick:()=>_(!0),disabled:!Q,children:"Create index"})]}),ee&&(0,a.jsx)(A.Z,{schema:j,entity:"indexes"}),O&&(0,a.jsx)(g.A,{}),B&&(0,a.jsx)(p.Z,{error:$,subject:"Failed to retrieve database indexes"}),G&&(0,a.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,a.jsx)(x.Z,{head:[(0,a.jsx)(x.Z.th,{children:"Schema"},"schema"),(0,a.jsx)(x.Z.th,{children:"Table"},"table"),(0,a.jsx)(x.Z.th,{children:"Name"},"name"),(0,a.jsx)(x.Z.th,{},"buttons")],body:(0,a.jsxs)(a.Fragment,{children:[0===et.length&&0===l.length&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No indexes created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no indexes found in the schema "',j,'"']})]})}),0===et.length&&l.length>0&&(0,a.jsx)(x.Z.tr,{children:(0,a.jsxs)(x.Z.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',l,'" did not return any results']})]})}),ea.length>0&&ea.map(e=>(0,a.jsxs)(x.Z.tr,{children:[(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.schema,children:e.schema})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.table,children:e.table})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsx)("p",{title:e.name,children:e.name})}),(0,a.jsx)(x.Z.td,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[(0,a.jsx)(T.z,{type:"default",onClick:()=>M(e),children:"View definition"}),!ee&&(0,a.jsx)(T.z,{type:"text",className:"px-1",icon:(0,a.jsx)(P.Z,{}),onClick:()=>D(e)})]})})]},e.name))]})})})]})}),(0,a.jsx)(Z.ZP,{size:"xlarge",visible:void 0!==L,header:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Index:"}),(0,a.jsx)("code",{className:"text-sm ml-2",children:null==L?void 0:L.name})]}),onCancel:()=>M(void 0),"data-sentry-element":"SidePanel","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(h.Z,{isReadOnly:!0,id:null!==(e=null==L?void 0:L.name)&&void 0!==e?e:"",language:"pgsql",defaultValue:null!==(n=null==L?void 0:L.definition)&&void 0!==n?n:"","data-sentry-element":"CodeEditor","data-sentry-source-file":"Indexes.tsx"})})})}),(0,a.jsx)(en,{visible:b,onClose:()=>_(!1),"data-sentry-element":"CreateIndexSidePanel","data-sentry-source-file":"Indexes.tsx"}),(0,a.jsx)(R.Z,{variant:"warning",size:"medium",loading:J,visible:void 0!==z,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete index ",(0,a.jsx)("code",{className:"text-sm",children:null==z?void 0:z.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onConfirm:()=>void 0!==z?es(z):{},onCancel:()=>D(void 0),alert:{title:"This action cannot be undone",description:"Deleting an index that is still in use will cause queries to slow down, and in some cases causing significant performance issues."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("ul",{className:"mt-4 space-y-5",children:(0,a.jsx)("li",{className:"flex gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Before deleting this index, consider:"}),(0,a.jsxs)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:[(0,a.jsx)("li",{className:"list-disc ml-6",children:"This index is no longer in use"}),(0,a.jsx)("li",{className:"list-disc ml-6",children:"The table which the index is on is not currently in use, as dropping an index requires a short exclusive access lock on the table."})]})]})})})})]})},ea=t(32500),es=t(78066),er=t(24083),ei=t(95767);let el=()=>(0,a.jsx)(es._S,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"IndexesPage","data-sentry-source-file":"indexes.tsx",children:(0,a.jsxs)(es.jX,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(es.Lc,{className:"gap-0","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(er.p,{className:"!mb-0",title:"Database Indexes",description:"Improve query performance against your database","data-sentry-element":"FormHeader","data-sentry-source-file":"indexes.tsx"})}),(0,a.jsxs)(es.g$,{className:"flex items-center lg:justify-end gap-2 flex-wrap","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(ee.G,{className:"no-underline",href:"https://supabase.com/docs/guides/database/query-optimization","data-sentry-element":"DocsButton","data-sentry-source-file":"indexes.tsx"}),(0,a.jsx)(T.z,{asChild:!0,type:"default",icon:(0,a.jsx)(s.Z,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",className:"no-underline",href:"https://supabase.com/docs/guides/database/extensions/index_advisor",children:"Index Advisor"})})]}),(0,a.jsx)("div",{className:"col-span-12 mt-3",children:(0,a.jsx)(et,{"data-sentry-element":"Indexes","data-sentry-source-file":"indexes.tsx"})})]})});el.getLayout=e=>(0,a.jsx)(ei.Z,{children:(0,a.jsx)(ea.Z,{title:"Indexes",children:e})});var eo=el},21775:function(e,n,t){"use strict";t.d(n,{H:function(){return r},a:function(){return i}});var a=t(97458),s=t(98686);let r=e=>{let{name:n}=e;return(0,a.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm","data-sentry-component":"BadgeDisabled","data-sentry-source-file":"Badges.tsx",children:(0,a.jsx)("span",{className:"opacity-50",children:n})})},i=e=>{let{name:n,handleRemove:t}=e;return(0,a.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),"data-sentry-component":"BadgeSelected","data-sentry-source-file":"Badges.tsx",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)(s.Z,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},"data-sentry-element":"X","data-sentry-source-file":"Badges.tsx"})]})}},6514:function(e,n,t){"use strict";t.d(n,{m:function(){return f}});var a=t(97458),s=t(40916),r=t.n(s),i=t(92238),l=t.n(i),o=t(98601),c=t(62507),d=t(52983),u=t(42026),m=t(65092),x=t(47482),p=t(64890),h=t(21775);let f=e=>{let{options:n,value:t,placeholder:s,searchPlaceholder:i="Search for option",disabled:f=!1,onChange:g=()=>{}}=e,[y,j]=(0,d.useState)(!1),[v,b]=(0,d.useState)(t||[]),_=t||v,S=r()(n,["disabled"],["desc"]),N=e=>void 0!==(_||[]).find(n=>n===e.value),w=e=>{let t=N(e)?[...l()(_,e.value)]:[..._.concat([e.value])],a=n.filter(e=>e.disabled).map(e=>e.name),s=[...new Set(t.concat(a))];b(s),g(s)};return(0,a.jsx)("div",{className:f?"pointer-events-none opacity-50":"","data-sentry-component":"MultiSelectV2","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(u.J2,{open:y,onOpenChange:j,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(u.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===_.length?"h-9":"")),onClick:()=>j(!0),children:[0===_.length&&s&&(0,a.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:s}),_.map((e,n)=>{var t;let s="".concat(e,"-").concat(n),r=S.find(n=>n.value===e),i=null!==(t=null==r?void 0:r.disabled)&&void 0!==t&&t;return r?i?(0,a.jsx)(h.H,{name:r.name},s):(0,a.jsx)(h.a,{name:r.name,handleRemove:()=>w(r)},s):(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,a.jsx)(o.Z,{size:16,strokeWidth:2,className:"text-foreground-lighter","data-sentry-element":"ChevronDown","data-sentry-source-file":"MultiSelectV2.tsx"})})]})}),(0,a.jsx)(u.yk,{className:"p-0 w-96 border-strong",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(x.mY,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.sZ,{placeholder:i,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx"}),(0,a.jsxs)(x.e8,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.rb,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:"No options found"}),(0,a.jsx)(x.fu,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsx)(p.x,{className:(0,m.cn)(S.length>7?"h-[210px]":""),"data-sentry-element":"ScrollArea","data-sentry-source-file":"MultiSelectV2.tsx",children:null==S?void 0:S.map(e=>{let n=!!(_&&_.find(n=>n===e.value));return(0,a.jsx)(x.di,{value:e.value,className:"cursor-pointer w-full",onClick:()=>w(e),onSelect:()=>w(e),children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,n&&(0,a.jsx)(c.Z,{size:14})]})},e.id)})})})]})]})})]})})}},94059:function(e,n,t){"use strict";t.d(n,{ZP:function(){return m}});var a=t(97458),s=t(52983),r=t(25843),i=t(65092);function l(e){let{children:n,className:t,tag:s="div",style:r}=e;return(0,a.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:n})}l.Title=function(e){let{className:n,level:t=1,children:s,style:r}=e;return(0,a.jsx)("h".concat(t),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},l.Text=function(e){let{className:n,children:t,style:s,type:r,disabled:i,mark:l,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:x}=e;return o?(0,a.jsx)("code",{style:s,children:t}):l?(0,a.jsx)("mark",{style:s,children:t}):c?(0,a.jsx)("kbd",{style:s,children:t}):m?(0,a.jsx)("strong",{style:s,children:t}):(0,a.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:t})},l.Link=function(e){let{children:n,target:t="_blank",href:s,className:r,onClick:i,style:l}=e;return(0,a.jsx)("a",{onClick:i,href:s,target:t,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:n})};let o=(0,s.createContext)({type:"text"}),c=e=>{let{type:n}=e;return(0,a.jsx)(o.Provider,{value:{type:n},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:n,className:t,ulClassName:s,style:r,type:i="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(c,{type:i,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:s,children:n})})})}u.Item=function(e){let{children:n,icon:t,active:s,rounded:l,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,x=(0,r.Z)("menu"),{type:p}=d(),h=[x.item.base];h.push(x.item.variants[p].base),s?h.push(x.item.variants[p].active):h.push(x.item.variants[p].normal);let f=[x.item.content.base];s?f.push(x.item.content.active):f.push(x.item.content.normal);let g=[x.item.icon.base];return s?g.push(x.item.icon.active):g.push(x.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",h),style:m,onClick:o,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:t}),(0,a.jsx)("span",{className:f.join(" "),children:n})]})},u.Group=function(e){let{children:n,icon:t,title:s}=e,i=(0,r.Z)("menu"),{type:l}=d();return(0,a.jsxs)("div",{className:[i.group.base,i.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("span",{className:i.group.icon,children:t}),(0,a.jsx)("span",{className:i.group.content,children:s}),n]})},u.Misc=function(e){let{children:n}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(l.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:n})})})};var m=u}},function(e){e.O(0,[6665,7623,588,305,6402,1864,8703,1018,4975,4376,9621,3954,659,9911,3760,4637,8069,9344,9192,6739,4098,902,3174,5538,4847,1379,272,2047,2728,6976,5767,9774,2888,179],function(){return e(e.s=99739)}),_N_E=e.O()}]);